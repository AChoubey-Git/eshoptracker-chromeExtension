(()=>{"use strict";({136:function(){var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function c(e){try{r(o.next(e))}catch(e){s(e)}}function a(e){try{r(o.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}r((o=o.apply(e,t||[])).next())}))};chrome.runtime.onMessage.addListener(((t,n,o)=>e(void 0,void 0,void 0,(function*(){const n=t.message;if("login"===n){const n=yield function(t){return e(this,void 0,void 0,(function*(){return fetch("http://eshop-activity-log.pearlthoughts.com/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>new Promise((n=>e(this,void 0,void 0,(function*(){yield t.json().then((e=>{e.status&&(chrome.storage.sync.set({name:e.username}),chrome.storage.sync.set({token:e.token})),n(e)}))})))))).catch((e=>{console.log(e)}))}))}(t.payload);n&&chrome.runtime.sendMessage({message:"login",data:n}),o("success")}else if("logout"===n);else if("signup"===n){const n=yield function(t){return e(this,void 0,void 0,(function*(){return fetch("http://eshop-activity-log.pearlthoughts.com/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>new Promise((n=>e(this,void 0,void 0,(function*(){yield t.json().then((e=>n(e)))})))))).catch((e=>{console.log(e)}))}))}(t.payload);n&&chrome.runtime.sendMessage({message:"signup",data:n}),o("success")}}))))}})[136]()})();